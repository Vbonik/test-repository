<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
        "http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

    <constant name="struts.multipart.maxSize" value="9999999999999"/>

    <package name="default" namespace="/" extends="struts-default">

        <action name="uploadFile" method="uploadFile" class="ftpAction">
            <interceptor-ref name="defaultStack">
                <param name="fileUpload.maximumSize">500242880</param>
            </interceptor-ref>
            <result name="success" type="redirect">
                <param name="location">/directoryList</param>
                <param name="currentDirectory.typeOfFile">1</param>
            </result>
            <result name="failure" type="redirect">
                <param name="location">/index.jsp</param>
            </result>
        </action>

        <action name="downloadFile" method="downloadFile" class="ftpAction">
            <result name="success" type="stream">
                <param name="contentType">application/octet-stream</param>
                <param name="inputName">fileInputStream</param>
                <param name="contentDisposition">attachment;filename="%{currentDirectory.currentFile.name}"</param>
                <param name="bufferSize">1024</param>
            </result>
        </action>

        <action name="loginFtp" method="login" class="ftpAction">
            <result name="success" type="redirect">
                <param name="location">/directoryList</param>
                <param name="currentDirectory.typeOfFile">1</param>
            </result>
            <result name="failure">/index.jsp</result>
        </action>

        <action name="loginAdmin" method="login" class="ftpAction">
            <result name="success" type="redirect">
                <param name="location">/admin</param>
            </result>
            <result name="failure">/index.jsp</result>
        </action>

        <action name="directoryList" class="ftpAction" method="getFileList">
            <result name="success">
                /jsp/directoryList.jsp
            </result>
        </action>

        <action name="admin" method="getUserFileList" class="administrationAction">
            <result name="success">jsp/admin.jsp</result>
            <result name="failure">jsp/warning.jsp</result>
        </action>

        <action name="addUser" method="addUser" class="administrationAction">
            <result name="success">jsp/user.jsp</result>
            <result name="failure">jsp/warning.jsp</result>
        </action>

        <action name="editUser" method="editUser" class="administrationAction">
            <result name="success">jsp/user.jsp</result>
            <result name="failure">jsp/warning.jsp</result>
        </action>

        <action name="deleteUser" method="deleteUser" class="administrationAction">
            <result name="success" type="redirect">admin</result>
            <result name="failure">jsp/warning.jsp</result>
        </action>

        <action name="updateUser" method="updateUser" class="administrationAction">
            <result name="success" type="redirect">admin</result>
            <result name="failure">jsp/warning.jsp</result>
        </action>


        <action name="fileList" method="getFileList" class="ftpAction">
            <result name="SUCCESS">
                <param name="location">/jsp/download.jsp</param>
            </result>
            <result name="failure">/index.jsp</result>
        </action>

        <action name="deleteFiles" class="ftpAction" method="deleteFiles">
            <result name="success" type="redirect">
                <param name="location">/directoryList</param>
                <param name="currentDirectory.typeOfFile">1</param>
            </result>
        </action>
    </package>


</struts>